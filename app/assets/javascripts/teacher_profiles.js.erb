$(document).ready(function() {
  $(".ratings_option").click(function(event1) {
    // uncheck all other .ratings options
    $(".ratings_option").prop("checked", false);
    $(this).prop("checked", true);
    
    // call the ajax function to index with either highest_rated or most_reviews scope
    // and upon succes, reload the dom with the appropriate partial
    $("#profiles_list").load("/teacher_profiles?ratings_option=" + $(this).attr("id") + ' #profiles_div');
  });

  $(".instruction_option").click(function(event2) {

    // get the currently selected ratings option (only 1 so use 0 index) 
    var ratings_option = $(".ratings_option:checkbox:checked")[0].id;
    
    var instruction_option = [];
    
    $(".instruction_option:checkbox:checked").each(function() {
       instruction_option.push(this.id); 
    });

    console.log(instruction_option);
    // note, use $.param to pass an data and still have the load function issue a get request instead of a post request
    $("#profiles_list").load("/teacher_profiles?" + $.param({"instruction_option[]": instruction_option, 
                                                             ratings_option: ""}) + " #profiles_div");
  });

  $(".price_option").click(function(event3) {
    var price_option_list = [];

    $(".price_option:checkbox:checked").each(function() {
       price_option_list.push($(this).data("price")); 
    });
    
    var price_option = Math.max.apply(Math, price_option_list); 

    $("#profiles_list").load("/teacher_profiles?" + $.param({price_option: price_option, 
                                                             ratings_option: ""}) + " #profiles_div");

  });

});


// pass the ratings option as well, and handle it in the controller!


