$(document).ready ->
  $(".vote").bind("click", ->
    # Answer, Review, Article or ForumPost
    type = $(this).attr("data-voteable_type")

    if type == "Answer"
      url = "/forum_posts/#{$(this).attr("data-post_id")}/answers/#{$(this).attr("data-answer_id")}/vote"
    else if type == "ForumPost"
      url = "/forum_posts/#{$(this).attr("data-forum_post_id")}/vote"
    else if type == "Resource"
      url = "/resources/#{$(this).attr("data-resource_id")}/vote"
    else if type == "Article"
      url = "/articles/#{$(this).attr("data-article_id")}/vote"

    if url
        $.ajax
          url: url
          type: "POST"
          data:
            type: $(this).attr("data-type")
            voteable_type: $(this).attr("data-voteable_type")
          dataType: "text"
          success: (data, textStatus) =>
            #change color of arrow
            $(this).parent().find(".vote").removeClass("selected_arrow")
            $(this).addClass("selected_arrow")
            # change the number of votes displayed
            if type == "Answer"
                ($(this).parent().parent()).find(".vote_count_answer").html(data)
            else
                $(".vote_count").html(data)
          error: (data, textStatus) =>
            alert("Sign in or register to vote!")

  )

